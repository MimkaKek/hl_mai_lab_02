# Домашняя работа №3 - STATEful сервис для NoSQL

## Цель

Получение практических навыков в построении сервисов, работающих с документо-ориентированными базами данных.

## Задание

Разработать приложение, осуществляющее хранение данных согласно варианту задания в MongoDB. Для описанных в архитектуре вызовов между сервисами создайте REST интерфейс.

- Данные должны храниться в MongoDB;
- Интерфейс к сущностям предоставляется в соответствии со стилем REST;
- API должен быть специфицирован в OpenAPI 3.0;
- Должен быть создан скрипт по созданию базы данных, а также её наполнению тестовыми данными;
- Для каждой коллекции должен быть создан отдельный сервис, реализующий CRUD операции.

## Решение

Было реализованно 4 сервиса под 4 коллекции:

- Сервис пользователей (User): отвечает за запись/чтение данных о пользователях, а также их авторизацию. Хранит в PostgreSQL. Порт - 8080.
- Сервис маршрутов (Path): отвечает за запись/чтение данных о маршрутах. Хранит в PostgreSQL. Порт - 8083.
- Сервис путешествий (Trip): отвечает за запись/чтение данных о путешествиях. Хранит в MongoDB. При создании путешествия отправляет запрос на создание группы сервису групп. Порт - 8081.
- Сервис групп (Party): отвечает за запись/чтение данных о присоединившихся к путешествиям пользователях. Хранит в MongoDB. Порт - 8082.

Касательно OpenAPI 3.0 - он оказался слишком громоздким для одного файла index.yaml, поэтому я разделил на 4 файла (на каждый сервис) и поместил в папку [docs](https://github.com/MimkaKek/hl_mai_lab_02/tree/main/docs).

Для запуска достаточно команды

```
docker compose up
```

Скрипт заполнения баз данных реализован в файле [init_db.py](https://github.com/MimkaKek/hl_mai_lab_02/blob/main/init_db.py). К нему прилагаются нужные пакеты в [requerments.txt](https://github.com/MimkaKek/hl_mai_lab_02/blob/main/requirements.txt).

## Справочная информация

### OpenAPI 3.0 
Он оказался слишком громоздким для одного файла index.yaml, поэтому я разделил на 4 файла (на каждый сервис) и поместил в папку [docs](https://github.com/MimkaKek/hl_mai_lab_02/tree/main/docs).

### Запуск
Для запуска достаточно команды

```
docker compose up
```

### Заполнение БД
Скрипт заполнения баз данных реализован в файле [init_db.py](https://github.com/MimkaKek/hl_mai_lab_02/blob/main/init_db.py). К нему прилагаются нужные пакеты в [requerments.txt](https://github.com/MimkaKek/hl_mai_lab_02/blob/main/requirements.txt).
